<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Honey Theatre</title>
  <link href="https://db.onlinewebfonts.com/c/413438edc16177b70627d108238ec05f?family=TRJN+DaVinci+Text"
    rel="stylesheet" />

  <script src="https://cdn.userway.org/widget.js" data-account="AlXfe9YAX3"></script>
  <link rel="stylesheet" href="static/styles/mainstyle.css" />
  <link rel="icon" type="image/png" href="/static/img/HoneyIcon.png">
  <style>
    @font-face {
      font-display: block;
      font-family: Mori;
      font-style: normal;
      font-weight: 400;
      src: url(https://assets.codepen.io/16327/PPMori-Regular.woff) format("woff");
    }


   /* Bee Animation Styles */
.bee-animation-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0; /* Under orange sections (they should have z-index > 5) */
}

.bee-path {
  position: absolute;
  width: 100%;
  height: 100%;
}

.theLine {
  fill: none;
  /* stroke: red; Visible for debugging */
  stroke-width: 2px;
  stroke-dasharray: 5,5; /* Dashed for better visibility */
}

.bee {
  position: absolute;
  width: 100px;
  height: 60px;
  transform: translate(-50%, -50%);
  will-change: transform;
}

/* Ensure orange sections stay above bee */
.orange-banner, .orange-section {
  position: relative;
  z-index: 10;
}

/* Ensure images stay above bee */
img:not(.bee) {
  position: relative;
  z-index: 10;
}
  </style>
</head>

<body>

  <div class="bee-animation-container">
    <svg class="bee-path" viewBox="0 0 100 2000" preserveAspectRatio="none">
      <!-- Adjust this path as needed - visible for debugging -->
      <path class="theLine" d="M50,0 Q25,200 75,400 T50,1000 Q25,1200 75,1400 T50,1800" />
    </svg>
    <img class="bee" src="static/img/loading.gif" alt="Flying bee" />
  </div>


  <!-- Navbar -->
  <nav class="navbar navbaralt">
    <a href="index.html"> <img src="static/img/Honey Logo small White.png" alt="Honey Theatre Logo" class="logo"></a>

    <!-- Mobile Menu Button - NEW ADDITION -->
    <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
    </button>

    <div class="nav-links">
      <a class="orangelink" href="about.html">About</a>
      <a class="orangelink" href="getinvolved.html">Get Involved</a>
      <a class="orangelink" href="events.html">Events</a>
      <a class="orangelink" href="news.html">News</a>
    </div>
    <button class="accessibility-toggle" aria-label="Toggle accessibility features">
      <span class="toggle-label">ACCESSIBILITY</span>
      <span class="toggle-switch">
        <span class="toggle-handle"></span>
      </span>
    </button>
  </nav>

  <div class="body-content">

    <div class="hero-text3  orangetext">
      About Us
    </div>
    <div class="endspacer2"></div>

    <div class="paragraph-holder">

      <p class="animatedtext">
      <div class="about-landing">
        <p class="bigtext animatedtext">
          Honey Theatre is a creative theatre company & community. <br><br>
        </p>
        <p class="animatedtext">
          We champion bold storytellers of the global majority. We are dedicated to well-being led artist development,
          inclusive practices and exploring themes of heritage, intersectional identities and culture.
        </p>

      </div>

      </p>
      <p class="animatedtext">
      <div class="about-image">
        <img class="about-img" src="static/img/Hummingbird BTS-270.JPG" alt="honey theater community" />
      </div>
      </p>
    </div>


    <div class="endspacer2"></div>

    <section class="orange-banner">

      <div class="paragraph-holder">
        <div class="endspacer3"></div>
        <p class="whitetext bigtext2 ">WHAT WE DO</p>
        <div class="endspacer2"></div>
      </div>

      <div class="paragraph-holder">

        <p class="animatedtext">
        <div class="about-image">
          <img class="about-img" src="static/img/whatwedo.jpg" alt="honey theater community" />
        </div>
        </p>

        <p class="animatedtext">
        <div class="about-landing">
          <p class="whitetext sideinfo animatedtext">
            From producing plays, development programmes, workshops and residencies, we aim to provide opportunities for
            any creative that wants to nurture, develop and showcase their talent.
          </p>

        </div>

        </p>



      </div>

      <div class="endspacer2"></div>

    </section>
    <div class="center-spacing">
      <button class="landingbutton landingbutton-nospace nohover" type="button">Meet The Team!</button>
    </div>

    <div id="team-loading-message" style="display: none; text-align: center; padding: 20px; color: #0000ff; font-family: 'Avenir Next', sans-serif;">Loading team members...</div>
    <div id="team-error-message" style="display: none; text-align: center; padding: 20px; color: red; font-family: 'Avenir Next', sans-serif;">Could not load team members. Please try again later.</div>

    <div class="endspacer4"></div>

    <div class="center-spacing">
      <!-- Co-founders will be loaded here -->
      <div class="team-container" id="co-founders-container">
        <!-- Static content removed, will be dynamically loaded -->
      </div>

      <div class="endspacer3"></div>

      <div class="paragraph-holder">
        <h2 class="bigtext left-align">Associate Members:</h2>
      </div>

      <div class="endspacer3"></div>

      <!-- Associate members will be loaded here -->
      <div class="team-container" id="associates-container">
        <!-- Static content removed, will be dynamically loaded -->
      </div>

      <div class="endspacer2"></div>
    </div>


    <div class="paragraph-holder">
      <div class="bottom-line"></div>
    </div>

    <div class="endspacer2"></div>

    <div class="paragraph-holder">
      <h2 class="bigtext">We've Worked with:</h2>
    </div>

    <div class="logo-carousel">
      <div class="carousel-track">
        <!-- First set of logos -->
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner1.png" alt="Partner Logo 1" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner2.png" alt="Partner Logo 2" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner3.png" alt="Partner Logo 3" class="logo-img">
        </div>

        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner7.png" alt="Partner Logo 3" class="logo-img">
        </div>


        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner4.png" alt="Partner Logo 4" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner5.png" alt="Partner Logo 5" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner6.png" alt="Partner Logo 6" class="logo-img">
        </div>
        <div class="carousel-slide">
          <span class="and-more">and more...</span>
        </div>

        <!-- Duplicate set for seamless looping -->
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner1.png" alt="Partner Logo 1" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner2.png" alt="Partner Logo 2" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner3.png" alt="Partner Logo 3" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner4.png" alt="Partner Logo 4" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner5.png" alt="Partner Logo 5" class="logo-img">
        </div>
        <div class="carousel-slide">
          <img loading="lazy" src="static/img/partners/partner6.png" alt="Partner Logo 6" class="logo-img">
        </div>
        <div class="carousel-slide">
          <span class="and-more">and more...</span>
        </div>
      </div>
    </div>


    <div class="endspacer2"></div>
    <div class="paragraph-holder">
      <div class="bottom-line"></div>
    </div>

    <div class="hero-text3 orangetext">Contact Us</div>

    <div class="form-holder">
      <p class="center-align blacktext">
        <a href="mailto:honeytheatreco@gmail.com">honeytheatreco@gmail.com</a>
      </p>

      <div class="social-icons center-align">
        <a href="https://www.instagram.com/honey.theatre/" target="_blank" class="social-icon">
          <img src="static/img/instagramWhite.png" alt="Instagram" />
        </a>
        <a href="#" class="social-icon" target="_blank">
          <img src="static/img/tiktoklogoWhite.png" alt="TikTok" />
        </a>
      </div>

      <div class="endspacer2"></div>

      <div class="bottom-line"></div>

      <div class="contactmsg animatedtext orangetext">
        <p>
          <strong>If you have any queries or comments, fill out this form and we
            will get back to you as soon as possible.</strong>
        </p>
        <br />
        <p>We look forward to connecting soon!</p>
      </div>

      <form class="contact-form animatedtext" action="https://formspree.io/f/mvgkepjq" method="POST">
        <div class="form-group">
          <input type="text" id="subject" name="subject" required placeholder="Subject" />
        </div>

        <div class="form-group">
          <input type="email" id="email" name="email" required placeholder="Your Email" />
        </div>

        <div class="form-group">
          <textarea id="message" name="message" rows="5" required placeholder="Your Message"></textarea>
        </div>

        <button type="submit" class="submit-btn">Send Message</button>

        <!-- Success message (hidden by default) -->
        <div class="success-message" style="display: none">
          <p>Thank you for your message! We'll get back to you soon.</p>
        </div>
      </form>


    </div>

    <div class="endspacer"></div>

  </div>

  <script>
    document
      .querySelector(".contact-form")
      .addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission

        // Hide all form inputs and the submit button
        const formElements = this.querySelectorAll(
          ".form-group, .submit-btn"
        );
        formElements.forEach((element) => {
          element.style.display = "none";
        });

        // Show the success message
        this.querySelector(".success-message").style.display = "block";

        // Actually submit the form in the background
        fetch(this.action, {
          method: this.method,
          body: new FormData(this),
          headers: {
            Accept: "application/json",
          },
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .catch((error) => {
            console.error(
              "There was a problem with the form submission:",
              error
            );
          });
      });
  </script>

  <script>
    function teamToggleBio(cardElement) {
      const wrapper = cardElement.parentElement;
      const bio = wrapper.querySelector('.team-bio');
      const arrow = cardElement.querySelector('.team-arrow');

      const isOpen = bio.classList.contains('open');

      if (isOpen) {
        bio.classList.remove('open');
        arrow.classList.remove('hidden');
      } else {
        bio.classList.add('open');
        arrow.classList.add('hidden');
      }
    }

    function teamToggleBioFromButton(closeButton) {
      const bio = closeButton.parentElement;
      const wrapper = bio.parentElement;
      const arrow = wrapper.querySelector('.team-arrow');

      bio.classList.remove('open');
      arrow.classList.remove('hidden');
    }
  </script>


  <!-- Newsletter Button -->
  <div class="newsletter-btn" id="newsletterBtn">
    Sign up to our newsletter!
    <button class="close-btn" id="closeNewsletterBtn">×</button>
  </div>



  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <!-- Column 1: Logo -->
      <div class="footer-column">
        <a href="#" class="back-to-top" title="Back to Top">
          <img src="static/img/Honey Logo small White.png" alt="Honey Theatre Logo" class="footer-logo">
        </a>
      </div>

      <!-- Column 2: Contact -->
      <div class="footer-column">
        <h3><a href="/contact.html">CONTACT US</a></h3>
        <p><a href="mailto:honeytheatreco@gmail.com">honeytheatreco@gmail.com</a></p>
        <div class="social-icons">
          <a href="https://www.instagram.com/honey.theatre/" target="_blank" class="social-icon">
            <img src="static/img/instagramWhite.png" alt="Instagram">
          </a>
          <a href="#" class="social-icon" target="_blank">
            <img src="static/img/tiktoklogoWhite.png" alt="TikTok">
          </a>
        </div>
      </div>

      <!-- Column 3: Support -->
      <div class="footer-column">
        <h3><a href="/support.html">SUPPORT US</a></h3>
        <p>© Honey Theatre 2025</p>
      </div>
    </div>

    <div class="footer-bottom">
      Website Designed & Developed by <a href="https://www.1-earth.world" target="_blank">1EARTH Productions</a>
      🌐
    </div>
  </footer>

  <script>
    // Add this script to your existing JavaScript
    document.addEventListener('DOMContentLoaded', function () {
      // Team member animation observer - Will be called by the dynamic loading script
      // const teamCards = document.querySelectorAll('.team-profile-wrapper');
      // ... original observer code commented out or removed from here ...
    });
  </script>




  <script>// BACK 2 TOP BUTTON SCRIPT
    document.querySelector('.back-to-top').addEventListener('click', function (e) {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  </script>

  <script>
    // Track UserWay widget state
    let userWayWidgetOpen = false; // Maintained for potential legacy postMessage, though primary is API

    document.addEventListener("DOMContentLoaded", function () {
      const accessibilityToggle = document.querySelector(
        ".accessibility-toggle"
      );

      // Handle accessibility toggle - NEW VERSION
      if (accessibilityToggle) {
          accessibilityToggle.addEventListener('click', function () {
              this.classList.toggle('active');
              // userWayWidgetOpen = !userWayWidgetOpen; // State managed by UserWay if API call is successful

              if (typeof UserWay === 'object' && typeof UserWay.widgetToggle === 'function') {
                  UserWay.widgetToggle();
              } else {
                  console.warn('UserWay API (widgetToggle) not available. Attempting legacy interaction.');
                  const userwayButton = document.querySelector('#userwayAccessibilityIcon');
                  if (userwayButton) {
                      userwayButton.click();
                  } else {
                      const userwayIframe = document.querySelector('#userway-widget iframe');
                      if (userwayIframe && userwayIframe.contentWindow) {
                          try {
                              // Attempting a generic toggle, actual action might differ if API is absent
                              // The old script used userWayWidgetOpen to decide 'open' or 'close'
                              // For simplicity, sending a generic toggle if possible
                              userwayIframe.contentWindow.postMessage({
                                  action: 'toggle', // Or determine based on a manually tracked state if necessary
                                  source: 'userway'
                              }, '*');
                          } catch (e) {
                              console.error('Error communicating with UserWay via postMessage:', e);
                          }
                      } else {
                          console.warn('UserWay widget elements not found for legacy interaction.');
                      }
                  }
              }
          });
      }

      // Listen for UserWay's initialization to reliably hide the icon - NEW
      document.addEventListener('userway:init_completed', function (event) {
          hideUserWayIcon();
      });

      // NEW hideUserWayIcon function (consolidated and improved)
      function hideUserWayIcon() {
          if (typeof UserWay === 'object' && typeof UserWay.iconVisibilityOff === 'function') {
              UserWay.iconVisibilityOff();
              return;
          }
          const userwayIcon = document.querySelector("#userwayAccessibilityIcon");
          if (userwayIcon) {
            userwayIcon.style.display = "none";
          } else {
            let checks = 0;
            const checkInterval = setInterval(() => {
              checks++;
              const icon = document.querySelector("#userwayAccessibilityIcon");
              if (icon || checks >= 10) { // Try for 5 seconds
                clearInterval(checkInterval);
                if (icon) {
                    icon.style.display = "none";
                }
              }
            }, 500);
          }
      }

      // Initial call in case UserWay is already initialized
      hideUserWayIcon();
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const newsletterBtn = document.getElementById('newsletterBtn');
      const closeBtn = document.getElementById('closeNewsletterBtn');



      // Show button after 3 seconds
      setTimeout(function () {
        console.log('Attempting to show newsletter button');
        if (!localStorage.getItem('newsletterClosed')) {
          console.log('Showing newsletter button');
          newsletterBtn.classList.add('visible');
        } else {
          console.log('Newsletter was previously closed by user');
        }
      }, 3000);

      // Close button functionality
      closeBtn.addEventListener('click', function (e) {
        e.stopPropagation(); // Prevent triggering the main button click
        newsletterBtn.classList.remove('visible');
        newsletterBtn.classList.add('hidden');

        // Store preference in localStorage
        localStorage.setItem('newsletterClosed', 'true');
      });

      // Main button click (could link to a signup page)
      newsletterBtn.addEventListener('click', function () {
        // Replace this with your actual signup functionality
        window.location.href = '/newsletter-signup.html';
      });
    });
  </script>
  <script>
    // Intersection Observer for animated text
    document.addEventListener('DOMContentLoaded', function () {
      // Hero text animation is handled by CSS

      // Animate paragraphs when they come into view
      const animatedElements = document.querySelectorAll('.animatedtext');

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });

      animatedElements.forEach(element => {
        observer.observe(element);
      });
    });
  </script>
  <script>
    // Mobile Menu Toggle
    document.addEventListener('DOMContentLoaded', function () {
      const mobileToggle = document.querySelector('.mobile-menu-toggle');
      const navbar = document.querySelector('.navbar');
      const mobileMenu = document.createElement('div');
      mobileMenu.className = 'mobile-menu-overlay';
  
      // Create mobile menu content
      mobileMenu.innerHTML = `
        <div class="mobile-menu-header">
          <img src="static/img/Honey Logo small White.png" alt="Honey Theatre Logo" class="mobile-menu-logo">
          <button class="mobile-menu-close" aria-label="Close menu">×</button>
        </div>
        <div class="mobile-menu-links">
          <a class="orangelink" href="about.html">About</a>
          <a class="orangelink" href="getinvolved.html">Get Involved</a>
          <a class="orangelink" href="events.html">Events</a>
          <a class="orangelink" href="news.html">News</a>
        </div>
      `;
  
      document.body.appendChild(mobileMenu);
      const closeButton = mobileMenu.querySelector('.mobile-menu-close');
  
      // Toggle menu
      mobileToggle.addEventListener('click', function () {
        mobileMenu.classList.add('active');
        document.body.style.overflow = 'hidden';
        navbar.style.opacity = '0';
        navbar.style.pointerEvents = 'none'; // Disable interactions
      });
  
      // Close menu
      closeButton.addEventListener('click', function () {
        mobileMenu.classList.remove('active');
        document.body.style.overflow = '';
        navbar.style.opacity = '1';
        navbar.style.pointerEvents = 'auto'; // Re-enable interactions
      });
  
      // Close menu when clicking on links
      const mobileLinks = mobileMenu.querySelectorAll('.mobile-menu-links a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', function () {
          mobileMenu.classList.remove('active');
          document.body.style.overflow = '';
          navbar.style.opacity = '1';
          navbar.style.pointerEvents = 'auto'; // Re-enable interactions
        });
      });
    });
  </script>

  <!-- GSAP Core -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);
    
    // Set initial bee state
    gsap.set(".bee", {
      autoAlpha: 1,
      xPercent: -50,
      yPercent: -50,
      transformOrigin: "center center"
    });

    // Create animation timeline
    const beeTimeline = gsap.timeline({
      scrollTrigger: {
        trigger: "#svg-stage",
        start: "top center",
        end: "bottom center",
        scrub: 1,
        markers: false // Set to true for debugging
      }
    });

    // Animate along path
    beeTimeline.to(".bee", {
      motionPath: {
        path: ".theLine",
        align: ".theLine",
        alignOrigin: [0.5, 0.5],
        autoRotate: true+90,
        start: 0,
        end: 1
      },
      ease: "none",
      duration: 1
    });
  });
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const coFoundersContainer = document.getElementById('co-founders-container');
    const associatesContainer = document.getElementById('associates-container');
    const teamLoadingMessage = document.getElementById('team-loading-message');
    const teamErrorMessage = document.getElementById('team-error-message');

    const apiURL = 'https://public-api.wordpress.com/wp/v2/sites/honeytheatre.wordpress.com/pages/1';
    const defaultPlaceholderImage = 'static/img/player1.png'; // Fallback image

    function createTeamMemberHTML(member) {
        const bioContent = member.bio ? member.bio : '<p>Bio not available.</p>';
        const nameDisplay = member.name ? member.name : 'N/A';
        const roleDisplay = member.role ? member.role : 'N/A';
        const imageUrl = member.imageUrl ? member.imageUrl : defaultPlaceholderImage;

        return (
            '<div class="team-profile-wrapper">' +
                '<div class="team-profile-card" onclick="teamToggleBio(this)">' +
                    '<img loading="lazy" src="' + imageUrl + '" alt="' + nameDisplay + '">' +
                    '<div class="team-overlay">' +
                        '<div class="team-info">' +
                            '<div>' + nameDisplay + '</div>' +
                            '<div style="font-weight: normal;">' + roleDisplay + '</div>' +
                        '</div>' +
                        '<div class="team-arrow">⌄</div>' +
                    '</div>' +
                '</div>' +
                '<div class="team-bio">' +
                    '<strong>' + nameDisplay + '</strong>' +
                    bioContent +
                    '<div class="team-close" onclick="teamToggleBioFromButton(this)">⌃</div>' +
                '</div>' +
            '</div>'
        );
    }

    function processMemberElements(memberBlockElements) {
        let name = '', role = '', imageUrl = '', bio = '';
        const bioParagraphs = [];
        let pCounter = 0; // 0 for Name, 1 for Role

        for (const el of memberBlockElements) {
            if (el.tagName === 'P') {
                if (pCounter === 0) {
                    name = el.textContent.trim();
                    pCounter++;
                } else if (pCounter === 1) {
                    role = el.textContent.trim();
                    pCounter++;
                } else {
                    bioParagraphs.push(el.innerHTML); // Keep HTML for links
                }
            } else if (el.tagName === 'FIGURE') {
                const imgTag = el.querySelector('img');
                if (imgTag && imgTag.src) {
                    imageUrl = imgTag.src;
                }
            }
        }
        bio = bioParagraphs.join('\n');
        return { name, role, imageUrl, bio };
    }

    async function fetchTeamMembers() {
        if (teamLoadingMessage) teamLoadingMessage.style.display = 'block';
        if (teamErrorMessage) teamErrorMessage.style.display = 'none';

        try {
            const response = await fetch(apiURL);
            if (!response.ok) {
                throw new Error('HTTP error! status: ' + response.status);
            }
            const data = await response.json();
            const contentRendered = data.content && data.content.rendered;

            if (!contentRendered) {
                throw new Error('No content found in API response.');
            }

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = contentRendered;

            const allTeamMembersData = [];
            let currentMemberElements = [];
            const children = Array.from(tempDiv.children);
            let startIndex = 0;

            // Skip initial instructional P and the following HR
            if (children.length > 0 && children[0].tagName === 'P' && children[0].textContent.toLowerCase().includes("edit this page")) {
                startIndex = 1; 
                if (children.length > 1 && children[1].tagName === 'HR') {
                    startIndex = 2; 
                }
            }
            
            for (let i = startIndex; i < children.length; i++) {
                const el = children[i];
                if (el.tagName === 'HR') {
                    if (currentMemberElements.length > 0) {
                        const memberDetail = processMemberElements(currentMemberElements);
                        if(memberDetail.name || memberDetail.role) { // Add only if there's at least a name or role
                           allTeamMembersData.push(memberDetail);
                        }
                        currentMemberElements = [];
                    }
                } else if (el.tagName === 'P' || el.tagName === 'FIGURE') {
                    currentMemberElements.push(el);
                }
            }
            if (currentMemberElements.length > 0) { // Process last member if no trailing HR
                 const memberDetail = processMemberElements(currentMemberElements);
                 if(memberDetail.name || memberDetail.role) {
                    allTeamMembersData.push(memberDetail);
                 }
            }

            coFoundersContainer.innerHTML = ''; 
            associatesContainer.innerHTML = '';

            if (allTeamMembersData.length === 0) {
                 if (teamErrorMessage) teamErrorMessage.textContent = 'No team members found or could not parse data correctly.';
                 if (teamErrorMessage) teamErrorMessage.style.display = 'block';
            } else {
                allTeamMembersData.forEach((member, index) => {
                    const memberHTML = createTeamMemberHTML(member);
                    if (index < 2) { 
                        coFoundersContainer.innerHTML += memberHTML;
                    } else {
                        associatesContainer.innerHTML += memberHTML;
                    }
                });
            }
            
            initializeTeamCardAnimations();

        } catch (error) {
            console.error('Error fetching or parsing team members:', error);
            if (teamErrorMessage) teamErrorMessage.textContent = 'Could not load team members: ' + error.message;
            if (teamErrorMessage) teamErrorMessage.style.display = 'block';
        } finally {
            if (teamLoadingMessage) teamLoadingMessage.style.display = 'none';
        }
    }

    function initializeTeamCardAnimations() {
        const teamCards = document.querySelectorAll('.team-profile-wrapper');
        if (teamCards.length === 0) return;

        // Ensure the IntersectionObserver is available or polyfilled if needed for older browsers
        if ('IntersectionObserver' in window) {
            const teamObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        teamObserver.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            teamCards.forEach(card => {
                teamObserver.observe(card);
            });
        } else {
            // Fallback for browsers without IntersectionObserver: make cards visible immediately
            teamCards.forEach(card => card.classList.add('visible'));
        }
    }
    
    fetchTeamMembers();
});
</script>

</body>

</html>